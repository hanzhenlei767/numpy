<html>
<head>
  <title>八、numpy线性代数</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307934 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1111"/>
<h1>八、numpy线性代数</h1>

<div>
<span><div><span style="font-size: 16pt; font-family: 楷体;">八、</span><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">numpy</span><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">线性代数  </span></div><div><span style="font-size: 21px; font-family: 楷体; line-height: 30px;">import numpy as np</span></div><div><span style="font-size: 21px; font-family: 楷体; line-height: 30px;">from </span><span style="font-size: 21px; color: rgb(255, 0, 0); font-family: 楷体; line-height: 30px;">numpy.linalg</span><span style="font-size: 21px; font-family: 楷体; line-height: 30px;"> </span><span style="font-size: 21px; font-family: 楷体; line-height: 30px;">import </span><span style="font-size: 21px; color: rgb(255, 0, 0); font-family: 楷体; line-height: 30px;">inv</span><span style="font-size: 21px; font-family: 楷体; line-height: 30px;">,</span><span style="font-size: 21px; color: rgb(255, 0, 0); font-family: 楷体; line-height: 30px;">qr    </span><span style="font-size: 21px; font-family: 楷体; line-height: 30px;">#</span><span style="font-size: 21px; color: rgb(255, 0, 0); font-family: 楷体; line-height: 30px;">inv是求矩阵的逆</span><span style="font-size: 21px; font-family: 楷体; line-height: 30px;">。</span><span style="font-size: 21px; color: rgb(255, 0, 0); font-family: 楷体; line-height: 30px;">qr是矩阵分解</span></div><div><br/></div><div><img src="八、numpy线性代数_files/Image.png" type="image/png" data-filename="Image.png" style="font-family: 楷体; font-size: 16pt;" width="723"/></div><div><br/></div><div><span style="font-size: 16pt; font-family: 楷体;">#</span><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">矩阵转置(T:行和列转置)</span></div><div><span style="font-size: 16pt; font-family: 楷体;">arr = np.arange(6).</span><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">reshape</span><span style="font-size: 16pt; font-family: 楷体;">((3, 2))</span></div><div><span style="font-size: 16pt; font-family: 楷体;">print(arr)</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[[0 1]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[2 3]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[4 5]]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">print(arr.</span><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">T</span><span style="font-size: 16pt; font-family: 楷体;">)#</span><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">转置</span></div><div><span style="font-size: 16pt; font-family: 楷体;">print (</span><span style="font-size: 16pt; font-family: 楷体;">arr</span><span style="font-size: 16pt; font-family: 楷体;">.</span><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">transpose</span><span style="font-size: 16pt; font-family: 楷体;">()) #</span><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">和T一样，转置</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[[0 2 4]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[1 3 5]]</span></div><div><br/></div><div><span style="font-size: 16pt; font-family: 楷体;">#</span> <span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">矩阵乘法（dot）</span></div><div><span style="font-size: 16pt; font-family: 楷体;">x = np.array([[1., 2., 3.], [4., 5., 6.]])</span></div><div><span style="font-size: 16pt; font-family: 楷体;">y = np.array([[6., 23.], [-1, 7], [8, 9]])</span></div><div><span style="font-size: 16pt; font-family: 楷体;">print(x)</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[[ 1.  2.  3.]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[ 4.  5.  6.]]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">print(y)</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[[  6.  23.]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[ -1.   7.]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[  8.   9.]]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">print(x.</span><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">dot</span><span style="font-size: 16pt; font-family: 楷体;">(y))  #</span> <span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">矩阵乘法。等价于np.dot(x, y)</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[[  28.   64.]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[  67.  181.]]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">print(np.</span><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">dot</span><span style="font-size: 16pt; font-family: 楷体;">(x,y))</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[[  28.   64.]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[  67.  181.]]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">print(np.</span><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">dot</span><span style="font-size: 16pt; font-family: 楷体;">(x, np.ones(3)))#</span><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">np.ones(3)是一维全1的向量</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[  6.  15.]#</span><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">两行一列</span></div><div><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;"><br/></span></div><div><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">#矩阵相乘</span></div><div><span style="font-family: 楷体; font-size: 16pt;">two_dim_matrix_one = np.array([[1, 2, 3], [4, 5, 6]])</span></div><div><span style="font-family: 楷体; font-size: 16pt;">another_two_dim_matrix_one = np.array([[7, 8, 9], [4, 7, 1]])</span></div><div><span style="font-family: 楷体; font-size: 16pt;"><br/></span></div><div><span style="font-family: 楷体; font-size: 16pt;">element_wise = two_dim_matrix_one * another_two_dim_matrix_one</span></div><div><span style="font-family: 楷体; font-size: 16pt;">print((element_wise))</span></div><div><span style="font-family: 楷体; font-size: 16pt;">[[ 7 16 27]</span></div><div><span style="font-family: 楷体; font-size: 16pt;">[16 35  6]]</span></div><div><span style="font-family: 楷体; font-size: 16pt;"><br/></span></div><div><span style="font-family: 楷体; font-size: 16pt;">element_wise_2 = np.<font style="color: rgb(255, 0, 0);">multiply</font>(two_dim_matrix_one, another_two_dim_matrix_one)</span></div><div><span style="font-family: 楷体; font-size: 16pt;">print((element_wise_2))</span></div><div><span style="font-family: 楷体; font-size: 16pt;">[[ 7 16 27]</span></div><div><span style="font-family: 楷体; font-size: 16pt;">[16 35  6]]</span></div><div><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;"><br/></span></div><div><br/></div><div><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">#计算方阵的逆</span></div><div><span style="font-size: 16pt; font-family: 楷体;">X = randn(2, 3)#</span><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">2*3标准正态分布矩阵</span></div><div><span style="font-size: 16pt; font-family: 楷体;">print(X)</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[[ 1.88345133  1.16747912 -1.56167964]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[-0.06763553 -0.51647772 -0.25858752]]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">mat = X.T.</span><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">dot</span><span style="font-size: 16pt; font-family: 楷体;">(X)#</span><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">X的转置乘X</span></div><div><span style="font-size: 16pt; font-family: 楷体;">print(mat)</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[[ 3.55196348  2.23382235 -2.9238579 ]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[ 2.23382235  1.62975674 -1.68967369]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[-2.9238579  -1.68967369  2.50571081]]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">print(</span><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">inv</span><span style="font-size: 16pt; font-family: 楷体;">(mat))#</span><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">对mat求逆</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[[  1.15445421e+15  -6.17249236e+14   9.30877684e+14]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[ -6.17249236e+14   3.30023152e+14  -4.97710114e+14]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[  9.30877684e+14  -4.97710114e+14   7.50599938e+14]]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">print(mat.dot(inv(mat)))#</span><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">矩阵*矩阵的逆 = 单位矩阵</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[[ 0.84333489  0.04597178 -0.29483925]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[-0.23716605  1.18445726 -0.3462636 ]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[-0.71382836  0.18883341  0.97892872]]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">q, r =</span> <span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">qr</span><span style="font-size: 16pt; font-family: 楷体;">(mat)#</span><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">矩阵分解</span></div><div><span style="font-size: 16pt; font-family: 楷体;">print(q)</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[[-0.25346407 -0.19259654 -0.94797813]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[-0.09843884 -0.96975694  0.22334117]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[-0.96232311  0.14992682  0.22683956]]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">print(r)</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[[ -1.66332523e+00   6.47143015e-01  -7.58831329e+00]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[  0.00000000e+00  -1.70181301e+00   1.67556711e+00]</span></div><div><span style="font-size: 16pt; font-family: 楷体;">[  0.00000000e+00   0.00000000e+00  -3.33066907e-16]]</span></div></span>
</div></body></html> 